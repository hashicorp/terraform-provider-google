---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/dialogflowcx/Playbook.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Dialogflow CX"
description: |-
  Playbook is the basic building block to instruct the LLM how to execute a certain task.
---

# google_dialogflow_cx_playbook

Playbook is the basic building block to instruct the LLM how to execute a certain task.


To get more information about Playbook, see:

* [API documentation](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/projects.locations.agents.playbooks)
* How-to Guides
    * [Official CX Documentation](https://cloud.google.com/dialogflow/cx/docs)

<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=dialogflowcx_playbook_basic&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Dialogflowcx Playbook Basic


```hcl
resource "google_dialogflow_cx_agent" "agent" {
  display_name          = "dialogflowcx-agent-basic"
  location              = "global"
  default_language_code = "en"
  time_zone             = "America/New_York"
  description           = "Example description."
}

resource "google_dialogflow_cx_playbook" "my-playbook" {
  parent        = google_dialogflow_cx_agent.agent.id
  display_name  = "Example Display Name"
  goal          = "Example Goal"
  playbook_type = "ROUTINE"
  instruction {
    steps {
      text = "step 1"
      steps = jsonencode([
        {
          "text": "step 1 1"
        },
        {
          "text": "step 1 2",
          "steps": [
            {
              "text": "step 1 2 1"
            },
            {
              "text": "step 1 2 2"
            }
          ]
        },
        {
          "text": "step 1 3"
        }
      ])
    }
    steps {
      text = "step 2"
    }
    steps {
      text = "step 3"
    }
  }
}
```
<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=dialogflowcx_playbook_fulfillment&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Dialogflowcx Playbook Fulfillment


```hcl
resource "google_dialogflow_cx_agent" "agent" {
  display_name          = "dialogflowcx-agent"
  location              = "global"
  default_language_code = "en"
  time_zone             = "America/New_York"
  description           = "Example description."
}

resource "google_storage_bucket" "bucket" {
  name                        = "dialogflowcx-bucket"
  location                    = "US"
  uniform_bucket_level_access = true
}

resource "google_dialogflow_cx_webhook" "my_webhook" {
  parent       = google_dialogflow_cx_agent.agent.id
  display_name = "MyWebhook"
  generic_web_service {
    uri = "https://example.com"
  }
}

resource "google_dialogflow_cx_tool" "my_tool" {
  parent       = google_dialogflow_cx_agent.agent.id
  display_name = "Example Tool"
  description  = "Example Description"
}

resource "google_dialogflow_cx_generator" "my_generator" {
  parent = google_dialogflow_cx_agent.agent.id
  display_name = "TF Prompt generator"
  llm_model_settings {
    model = "gemini-2.0-flash-001"
    prompt_text = "Return me some great results"
  }
  prompt_text {
    text = "Send me great results in french"
  }
  model_parameter {
    temperature = 0.55
  }
}

resource "google_dialogflow_cx_playbook" "my-playbook" {
  parent       = google_dialogflow_cx_agent.agent.id
  display_name = "Playbook Example with Fulfillment"
  goal         = "Example Goal"
  instruction {
    guidelines = "Example Guidelines"
    steps {
      text = "step 1"
      steps = jsonencode([
        {
          "text": "step 1 1"
        },
        {
          "text": "step 1 2",
          "steps": [
            {
              "text": "step 1 2 1"
            },
            {
              "text": "step 1 2 2"
            }
          ]
        },
        {
          "text": "step 1 3"
        }
      ])
    }
    steps {
      text = "step 2"
    }
    steps {
      text = "step 3"
    }
  }

  llm_model_settings {
    model = "gemini-2.0-flash-001"
    prompt_text = "Return me some great results"
  }

  referenced_tools = [google_dialogflow_cx_tool.my_tool.id]
}
```

## Argument Reference

The following arguments are supported:


* `display_name` -
  (Required)
  The human-readable name of the playbook, unique within an agent.

* `goal` -
  (Required)
  High level description of the goal the playbook intend to accomplish. A goal should be concise since it's visible to other playbooks that may reference this playbook.


* `instruction` -
  (Optional)
  Instruction to accomplish target goal.
  Structure is [documented below](#nested_instruction).

* `referenced_tools` -
  (Optional)
  The resource name of tools referenced by the current playbook in the instructions. If not provided explicitly, they are will be implied using the tool being referenced in goal and steps.

* `llm_model_settings` -
  (Optional)
  Llm model settings for the playbook.
  Structure is [documented below](#nested_llm_model_settings).

* `playbook_type` -
  (Optional)
  Type of the playbook.
  Possible values are: `PLAYBOOK_TYPE_UNSPECIFIED`, `TASK`, `ROUTINE`.

* `parent` -
  (Optional)
  The agent to create a Playbook for.
  Format: projects/<Project ID>/locations/<Location ID>/agents/<Agent ID>.



<a name="nested_instruction"></a>The `instruction` block supports:

* `guidelines` -
  (Optional)
  General guidelines for the playbook. These are unstructured instructions that are not directly part of the goal, e.g. "Always be polite". It's valid for this text to be long and used instead of steps altogether.

* `steps` -
  (Optional)
  Ordered list of step by step execution instructions to accomplish target goal.
  Structure is [documented below](#nested_instruction_steps).


<a name="nested_instruction_steps"></a>The `steps` block supports:

* `steps` -
  (Optional)
  Sub-processing needed to execute the current step.
  This field uses JSON data as a string. The value provided must be a valid JSON representation documented in [Step](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/projects.locations.agents.playbooks#step).

* `text` -
  (Optional)
  Step instruction in text format.

<a name="nested_llm_model_settings"></a>The `llm_model_settings` block supports:

* `model` -
  (Optional)
  The selected LLM model.

* `prompt_text` -
  (Optional)
  The custom prompt to use.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `{{parent}}/playbooks/{{name}}`

* `name` -
  The unique identifier of the Playbook.
  Format: projects/<Project ID>/locations/<Location ID>/agents/<Agent ID>/playbooks/<Playbook ID>.

* `token_count` -
  Estimated number of tokes current playbook takes when sent to the LLM.

* `create_time` -
  The timestamp of initial playbook creation.
  Uses RFC 3339, where generated output will always be Z-normalized and uses 0, 3, 6 or 9 fractional digits. Offsets other than "Z" are also accepted. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30".

* `update_time` -
  Last time the playbook version was updated.
  Uses RFC 3339, where generated output will always be Z-normalized and uses 0, 3, 6 or 9 fractional digits. Offsets other than "Z" are also accepted. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30".

* `referenced_playbooks` -
  The resource name of other playbooks referenced by the current playbook in the instructions.

* `referenced_flows` -
  The resource name of flows referenced by the current playbook in the instructions.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


Playbook can be imported using any of these accepted formats:

* `{{parent}}/playbooks/{{name}}`
* `{{parent}}/{{name}}`

In Terraform v1.12.0 and later, use an [`identity` block](https://developer.hashicorp.com/terraform/language/resources/identities) to import Playbook using identity values. For example:

```tf
import {
  identity = {
    name = "<-optional value->"
    parent = "<-optional value->"
  }
  to = google_dialogflow_cx_playbook.default
}
```

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Playbook using one of the formats above. For example:

```tf
import {
  id = "{{parent}}/playbooks/{{name}}"
  to = google_dialogflow_cx_playbook.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), Playbook can be imported using one of the formats above. For example:

```
$ terraform import google_dialogflow_cx_playbook.default {{parent}}/playbooks/{{name}}
$ terraform import google_dialogflow_cx_playbook.default {{parent}}/{{name}}
```
