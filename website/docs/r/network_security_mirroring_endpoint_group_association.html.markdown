---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/networksecurity/MirroringEndpointGroupAssociation.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Network Security"
description: |-
  An endpoint group association represents a link between a network and an
  endpoint group in the organization.
---

# google_network_security_mirroring_endpoint_group_association

An endpoint group association represents a link between a network and an
endpoint group in the organization.

Creating an association creates the networking infrastructure linking the
network to the endpoint group, but does not enable mirroring by itself.
To enable mirroring, the user must also create a network firewall policy
containing mirroring rules and associate it with the network.


To get more information about MirroringEndpointGroupAssociation, see:

* [API documentation](https://cloud.google.com/network-security-integration/docs/reference/rest/v1/projects.locations.mirroringEndpointGroupAssociations)
* How-to Guides
    * [Mirroring endpoint group association overview](https://cloud.google.com/network-security-integration/docs/out-of-band/endpoint-groups-overview#mirroring-endpoint-group-association)

<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=network_security_mirroring_endpoint_group_association_basic&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Network Security Mirroring Endpoint Group Association Basic


```hcl
resource "google_compute_network" "producer_network" {
  name                    = "example-prod-network"
  auto_create_subnetworks = false
}

resource "google_compute_network" "consumer_network" {
  name                    = "example-cons-network"
  auto_create_subnetworks = false
}

resource "google_network_security_mirroring_deployment_group" "deployment_group" {
  mirroring_deployment_group_id = "example-dg"
  location                      = "global"
  network                       = google_compute_network.producer_network.id
}

resource "google_network_security_mirroring_endpoint_group" "endpoint_group" {
  mirroring_endpoint_group_id   = "example-eg"
  location                      = "global"
  mirroring_deployment_group    = google_network_security_mirroring_deployment_group.deployment_group.id
}

resource "google_network_security_mirroring_endpoint_group_association" "default" {
  mirroring_endpoint_group_association_id = "example-ega"
  location                                = "global"
  network                                 = google_compute_network.consumer_network.id
  mirroring_endpoint_group                = google_network_security_mirroring_endpoint_group.endpoint_group.id
  labels = {
    foo = "bar"
  }
}
```

## Argument Reference

The following arguments are supported:


* `mirroring_endpoint_group` -
  (Required)
  The endpoint group that this association is connected to, for example:
  `projects/123456789/locations/global/mirroringEndpointGroups/my-eg`.
  See https://google.aip.dev/124.

* `network` -
  (Required)
  The VPC network that is associated. for example:
  `projects/123456789/global/networks/my-network`.
  See https://google.aip.dev/124.

* `location` -
  (Required)
  The cloud location of the association, currently restricted to `global`.


* `labels` -
  (Optional)
  Labels are key/value pairs that help to organize and filter resources.
  **Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
  Please refer to the field `effective_labels` for all of the labels present on the resource.

* `mirroring_endpoint_group_association_id` -
  (Optional)
  The ID to use for the new association, which will become the final
  component of the endpoint group's resource name. If not provided, the
  server will generate a unique ID.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/mirroringEndpointGroupAssociations/{{mirroring_endpoint_group_association_id}}`

* `name` -
  The resource name of this endpoint group association, for example:
  `projects/123456789/locations/global/mirroringEndpointGroupAssociations/my-eg-association`.
  See https://google.aip.dev/122 for more details.

* `create_time` -
  The timestamp when the resource was created.
  See https://google.aip.dev/148#timestamps.

* `update_time` -
  The timestamp when the resource was most recently updated.
  See https://google.aip.dev/148#timestamps.

* `locations_details` -
  (Deprecated)
  The list of locations where the association is present. This information
  is retrieved from the linked endpoint group, and not configured as part
  of the association itself.
  Structure is [documented below](#nested_locations_details).

  ~> **Warning:** `locationsDetails` is deprecated and will be removed in a future major release. Use `locations` instead.

* `state` -
  Current state of the endpoint group association.
  Possible values:
  STATE_UNSPECIFIED
  ACTIVE
  CREATING
  DELETING
  CLOSED
  OUT_OF_SYNC
  DELETE_FAILED

* `reconciling` -
  The current state of the resource does not match the user's intended state,
  and the system is working to reconcile them. This part of the normal
  operation (e.g. adding a new location to the target deployment group).
  See https://google.aip.dev/128.

* `locations` -
  The list of locations where the association is configured. This information
  is retrieved from the linked endpoint group.
  Structure is [documented below](#nested_locations).

* `terraform_labels` -
  The combination of labels configured directly on the resource
   and default labels configured on the provider.

* `effective_labels` -
  All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.


<a name="nested_locations_details"></a>The `locations_details` block contains:

* `location` -
  (Output)
  The cloud location, e.g. `us-central1-a` or `asia-south1`.

* `state` -
  (Output)
  The current state of the association in this location.
  Possible values:
  STATE_UNSPECIFIED
  ACTIVE
  OUT_OF_SYNC

<a name="nested_locations"></a>The `locations` block contains:

* `location` -
  (Output)
  The cloud location, e.g. `us-central1-a` or `asia-south1-b`.

* `state` -
  (Output)
  The current state of the association in this location.
  Possible values:
  STATE_UNSPECIFIED
  ACTIVE
  OUT_OF_SYNC

## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


MirroringEndpointGroupAssociation can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/mirroringEndpointGroupAssociations/{{mirroring_endpoint_group_association_id}}`
* `{{project}}/{{location}}/{{mirroring_endpoint_group_association_id}}`
* `{{location}}/{{mirroring_endpoint_group_association_id}}`

In Terraform v1.12.0 and later, use an [`identity` block](https://developer.hashicorp.com/terraform/language/resources/identities) to import MirroringEndpointGroupAssociation using identity values. For example:

```tf
import {
  identity = {
    location = "<-required value->"
    mirroringEndpointGroupAssociationId = "<-optional value->"
    project = "<-optional value->"
  }
  to = google_network_security_mirroring_endpoint_group_association.default
}
```

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import MirroringEndpointGroupAssociation using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/mirroringEndpointGroupAssociations/{{mirroring_endpoint_group_association_id}}"
  to = google_network_security_mirroring_endpoint_group_association.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), MirroringEndpointGroupAssociation can be imported using one of the formats above. For example:

```
$ terraform import google_network_security_mirroring_endpoint_group_association.default projects/{{project}}/locations/{{location}}/mirroringEndpointGroupAssociations/{{mirroring_endpoint_group_association_id}}
$ terraform import google_network_security_mirroring_endpoint_group_association.default {{project}}/{{location}}/{{mirroring_endpoint_group_association_id}}
$ terraform import google_network_security_mirroring_endpoint_group_association.default {{location}}/{{mirroring_endpoint_group_association_id}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
