---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/networksecurity/SecurityProfile.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Network Security"
description: |-
  A security profile defines the behavior associated to a profile type.
---

# google_network_security_security_profile

A security profile defines the behavior associated to a profile type.


To get more information about SecurityProfile, see:

* [API documentation](https://cloud.google.com/firewall/docs/reference/network-security/rest/v1/organizations.locations.securityProfiles)
* How-to Guides
    * [Create and manage security profiles](https://cloud.google.com/firewall/docs/configure-security-profiles)

## Example Usage - Network Security Security Profile Basic


```hcl
resource "google_network_security_security_profile" "default" {
  name        = "my-security-profile"
  parent      = "organizations/123456789"
  description = "my description"
  type        = "THREAT_PREVENTION"

  labels = {
    foo = "bar"
  }
}
```
## Example Usage - Network Security Security Profile Overrides


```hcl
resource "google_network_security_security_profile" "default" {
  name        = "my-security-profile"
  parent      = "organizations/123456789"
  description = "my description"
  type        = "THREAT_PREVENTION"

  threat_prevention_profile {
    severity_overrides {
      action   = "ALLOW"
      severity = "INFORMATIONAL"
    }

    severity_overrides {
      action   = "DENY"
      severity = "HIGH"
    }

    threat_overrides {
      action    = "ALLOW"
      threat_id = "280647"
    }

    antivirus_overrides {
      protocol = "SMTP"
      action   = "ALLOW"
    }
  }
}
```
## Example Usage - Network Security Security Profile Mirroring


```hcl
resource "google_compute_network" "default" {
  name                    = "my-network"
  auto_create_subnetworks = false
}

resource "google_network_security_mirroring_deployment_group" "default" {
  mirroring_deployment_group_id = "my-dg"
  location                      = "global"
  network                       = google_compute_network.default.id
}

resource "google_network_security_mirroring_endpoint_group" "default" {
  mirroring_endpoint_group_id = "my-eg"
  location                    = "global"
  mirroring_deployment_group  = google_network_security_mirroring_deployment_group.default.id
}

resource "google_network_security_security_profile" "default" {
  name        = "my-security-profile"
  parent      = "organizations/123456789"
  description = "my description"
  type        = "CUSTOM_MIRRORING"

  custom_mirroring_profile {
    mirroring_endpoint_group = google_network_security_mirroring_endpoint_group.default.id
  }
}
```
## Example Usage - Network Security Security Profile Intercept


```hcl
resource "google_compute_network" "default" {
  provider                = google-beta
  name                    = "my-network"
  auto_create_subnetworks = false
}

resource "google_network_security_intercept_deployment_group" "default" {
  provider                      = google-beta
  intercept_deployment_group_id = "my-dg"
  location                      = "global"
  network                       = google_compute_network.default.id
}

resource "google_network_security_intercept_endpoint_group" "default" {
  provider                      = google-beta
  intercept_endpoint_group_id   = "my-eg"
  location                      = "global"
  intercept_deployment_group    = google_network_security_intercept_deployment_group.default.id
}

resource "google_network_security_security_profile" "default" {
  provider    = google-beta
  name        = "my-security-profile"
  parent      = "organizations/123456789"
  description = "my description"
  type        = "CUSTOM_INTERCEPT"

  custom_intercept_profile {
    intercept_endpoint_group = google_network_security_intercept_endpoint_group.default.id
  }
}
```
## Example Usage - Network Security Security Profile Url Filtering


```hcl
resource "google_network_security_security_profile" "default" {
  provider    = google-beta
  name        = "my-security-profile"
  parent      = "organizations/123456789"
  description = "my description"
  type        = "URL_FILTERING"

  url_filtering_profile {
    url_filters {
      priority = 1
      filtering_action   = "ALLOW"
      urls = ["*example.com", "*about.example.com", "*help.example.com"]
    }
    url_filters {
      priority = 2
      filtering_action   = "DENY"
      urls = ["*restricted.example.com"]
    }
  }

  labels = {
    foo = "bar"
  }
}
```
## Example Usage - Network Security Security Profile Broker


```hcl
resource "google_compute_network" "default" {
  name                    = "my-network"
  auto_create_subnetworks = false
}

resource "google_network_security_mirroring_deployment_group" "default" {
  mirroring_deployment_group_id = "my-dg"
  location                      = "global"
  network                       = google_compute_network.default.id
}

resource "google_network_security_mirroring_endpoint_group" "default" {
  mirroring_endpoint_group_id = "my-eg"
  location                    = "global"
  type                        = "BROKER"
  mirroring_deployment_groups = [google_network_security_mirroring_deployment_group.default.id]
}

resource "google_network_security_security_profile" "default" {
  name        = "my-security-profile"
  parent      = "organizations/123456789"
  description = "my description"
  type        = "CUSTOM_MIRRORING"

  custom_mirroring_profile {
    mirroring_endpoint_group    = google_network_security_mirroring_endpoint_group.default.id
    mirroring_deployment_groups = [google_network_security_mirroring_deployment_group.default.id]
  }
}
```

## Argument Reference

The following arguments are supported:


* `type` -
  (Required)
  The type of security profile.
  Possible values are: `THREAT_PREVENTION`, `URL_FILTERING`, `CUSTOM_MIRRORING`, `CUSTOM_INTERCEPT`.

* `name` -
  (Required)
  The name of the security profile resource.


* `description` -
  (Optional)
  An optional description of the security profile. The Max length is 512 characters.

* `labels` -
  (Optional)
  A map of key/value label pairs to assign to the resource.

  **Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
  Please refer to the field `effective_labels` for all of the labels present on the resource.

* `threat_prevention_profile` -
  (Optional)
  The threat prevention configuration for the security profile.
  Structure is [documented below](#nested_threat_prevention_profile).

* `url_filtering_profile` -
  (Optional, [Beta](../guides/provider_versions.html.markdown))
  The url filtering configuration for the security profile.
  Structure is [documented below](#nested_url_filtering_profile).

* `custom_mirroring_profile` -
  (Optional)
  The configuration for defining the Mirroring Endpoint Group used to
  mirror traffic to third-party collectors.
  Structure is [documented below](#nested_custom_mirroring_profile).

* `custom_intercept_profile` -
  (Optional)
  The configuration for defining the Intercept Endpoint Group used to
  intercept traffic to third-party firewall appliances.
  Structure is [documented below](#nested_custom_intercept_profile).

* `location` -
  (Optional)
  The location of the security profile.
  The default value is `global`.

* `parent` -
  (Optional)
  The name of the parent this security profile belongs to.
  Format: organizations/{organization_id}.



<a name="nested_threat_prevention_profile"></a>The `threat_prevention_profile` block supports:

* `severity_overrides` -
  (Optional)
  The configuration for overriding threats actions by severity match.
  Structure is [documented below](#nested_threat_prevention_profile_severity_overrides).

* `threat_overrides` -
  (Optional)
  The configuration for overriding threats actions by threat id match.
  If a threat is matched both by configuration provided in severity overrides
  and threat overrides, the threat overrides action is applied.
  Structure is [documented below](#nested_threat_prevention_profile_threat_overrides).

* `antivirus_overrides` -
  (Optional)
  Defines what action to take for antivirus threats per protocol.
  Structure is [documented below](#nested_threat_prevention_profile_antivirus_overrides).


<a name="nested_threat_prevention_profile_severity_overrides"></a>The `severity_overrides` block supports:

* `action` -
  (Required)
  Threat action override.
  Possible values are: `ALERT`, `ALLOW`, `DEFAULT_ACTION`, `DENY`.

* `severity` -
  (Required)
  Severity level to match.
  Possible values are: `CRITICAL`, `HIGH`, `INFORMATIONAL`, `LOW`, `MEDIUM`.

<a name="nested_threat_prevention_profile_threat_overrides"></a>The `threat_overrides` block supports:

* `action` -
  (Required)
  Threat action.
  Possible values are: `ALERT`, `ALLOW`, `DEFAULT_ACTION`, `DENY`.

* `threat_id` -
  (Required)
  Vendor-specific ID of a threat to override.

* `type` -
  (Output)
  Type of threat.

<a name="nested_threat_prevention_profile_antivirus_overrides"></a>The `antivirus_overrides` block supports:

* `protocol` -
  (Required)
  Required protocol to match.
  Possible values are: `SMTP`, `SMB`, `POP3`, `IMAP`, `HTTP2`, `HTTP`, `FTP`.

* `action` -
  (Required)
  Threat action override. For some threat types, only a subset of actions applies.
  Possible values are: `ALERT`, `ALLOW`, `DEFAULT_ACTION`, `DENY`.

<a name="nested_url_filtering_profile"></a>The `url_filtering_profile` block supports:

* `url_filters` -
  (Optional)
  The configuration for action to take based on domain name match.
  A domain name would be checked for matching filters through the list in order of highest to lowest priority,
  and the first filter that a domain name matches with is the one whose actions gets applied.
  Structure is [documented below](#nested_url_filtering_profile_url_filters).


<a name="nested_url_filtering_profile_url_filters"></a>The `url_filters` block supports:

* `filtering_action` -
  (Required)
  The action to take when the filter is applied.
  Possible values are: `ALLOW`, `DENY`.

* `urls` -
  (Optional)
  A list of domain matcher strings that a domain name gets compared with to determine if the filter is applicable.
  A domain name must match with at least one of the strings in the list for a filter to be applicable.

* `priority` -
  (Required)
  The priority of the filter within the URL filtering profile.
  Must be an integer from 0 and 2147483647, inclusive. Lower integers indicate higher priorities.
  The priority of a filter must be unique within a URL filtering profile.

<a name="nested_custom_mirroring_profile"></a>The `custom_mirroring_profile` block supports:

* `mirroring_endpoint_group` -
  (Required)
  The target Mirroring Endpoint Group.
  When a mirroring rule with this security profile attached matches a packet,
  a replica will be mirrored to the location-local target in this group.
  Format: projects/{project_id}/locations/global/mirroringEndpointGroups/{endpoint_group_id}

* `mirroring_deployment_groups` -
  (Optional)
  The target downstream Mirroring Deployment Groups.
  This field is used for Packet Broker mirroring endpoint groups to specify
  the deployment groups that the packet should be mirrored to by the broker.
  Format: projects/{project_id}/locations/global/mirroringDeploymentGroups/{deployment_group_id}

* `mirroring_endpoint_group_type` -
  (Output)
  The type of the mirroring endpoint group this profile is attached to.
  Possible values:
  DIRECT
  BROKER

<a name="nested_custom_intercept_profile"></a>The `custom_intercept_profile` block supports:

* `intercept_endpoint_group` -
  (Required)
  The Intercept Endpoint Group to which matching traffic should be intercepted.
  Format: projects/{project_id}/locations/global/interceptEndpointGroups/{endpoint_group_id}

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `{{parent}}/locations/{{location}}/securityProfiles/{{name}}`

* `self_link` -
  Server-defined URL of this resource.

* `create_time` -
  Time the security profile was created in UTC.

* `update_time` -
  Time the security profile was updated in UTC.

* `etag` -
  This checksum is computed by the server based on the value of other fields,
  and may be sent on update and delete requests to ensure the client has an up-to-date
  value before proceeding.

* `terraform_labels` -
  The combination of labels configured directly on the resource
   and default labels configured on the provider.

* `effective_labels` -
  All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


SecurityProfile can be imported using any of these accepted formats:

* `{{parent}}/locations/{{location}}/securityProfiles/{{name}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import SecurityProfile using one of the formats above. For example:

```tf
import {
  id = "{{parent}}/locations/{{location}}/securityProfiles/{{name}}"
  to = google_network_security_security_profile.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), SecurityProfile can be imported using one of the formats above. For example:

```
$ terraform import google_network_security_security_profile.default {{parent}}/locations/{{location}}/securityProfiles/{{name}}
```
