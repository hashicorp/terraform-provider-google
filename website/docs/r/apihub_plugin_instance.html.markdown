---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/apihub/PluginInstance.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "API Hub"
description: |-
  Description
---

# google_apihub_plugin_instance

Description



## Example Usage - Apihub Plugin Instance Basic


```hcl
resource "google_apihub_plugin_instance" "apihub_plugin_instance_basic" {
  location         = "us-central1"
  plugin           = "existing-plugin-id"
  plugin_instance_id = "test"
  display_name = "Sample Plugin Instance Display Name"
  disable      = false
  actions {
    action_id = "existing-action-id"
  }
}
```

## Argument Reference

The following arguments are supported:


* `display_name` -
  (Required)
  The display name for this plugin instance. Max length is 255 characters.

* `actions` -
  (Required)
  The action status for the plugin instance.
  Structure is [documented below](#nested_actions).

* `location` -
  (Required)
  Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.

* `plugin` -
  (Required)
  Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.

* `plugin_instance_id` -
  (Required)
  The ID to use for the plugin instance, which will become the final
  component of the plugin instance's resource name. This field is optional.
  * If provided, the same will be used. The service will throw an error if
  the specified id is already used by another plugin instance in the plugin
  resource.
  * If not provided, a system generated id will be used.
  This value should be 4-63 characters, and valid characters
  are /a-z[0-9]-_/.


* `disable` -
  (Optional)
  The display name for this plugin instance. Max length is 255 characters.

* `auth_config` -
  (Optional)
  AuthConfig represents the authentication information.
  Structure is [documented below](#nested_auth_config).

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



<a name="nested_actions"></a>The `actions` block supports:

* `hub_instance_action` -
  (Output)
  The execution status for the plugin instance.
  Structure is [documented below](#nested_actions_hub_instance_action).

* `action_id` -
  (Required)
  This should map to one of the action id specified
  in actions_config in the plugin.

* `state` -
  (Output)
  The current state of the plugin action in the plugin instance.
  Possible values:
  STATE_UNSPECIFIED
  ENABLED
  DISABLED
  ENABLING
  DISABLING
  ERROR

* `schedule_cron_expression` -
  (Optional)
  The schedule for this plugin instance action. This can only be set if the
  plugin supports API_HUB_SCHEDULE_TRIGGER mode for this action.

* `curation_config` -
  (Optional)
  The curation information for this plugin instance.
  Structure is [documented below](#nested_actions_curation_config).

* `schedule_time_zone` -
  (Optional)
  The time zone for the schedule cron expression. If not provided, UTC will
  be used.


<a name="nested_actions_hub_instance_action"></a>The `hub_instance_action` block contains:

* `current_execution_state` -
  (Output)
  The current state of the execution.
  Possible values:
  CURRENT_EXECUTION_STATE_UNSPECIFIED
  RUNNING
  NOT_RUNNING

* `last_execution` -
  (Output)
  The result of the last execution of the plugin instance.
  Structure is [documented below](#nested_actions_hub_instance_action_last_execution).


<a name="nested_actions_hub_instance_action_last_execution"></a>The `last_execution` block contains:

* `result` -
  (Output)
  The result of the last execution of the plugin instance.
  Possible values:
  RESULT_UNSPECIFIED
  SUCCEEDED
  FAILED

* `error_message` -
  (Output)
  Error message describing the failure, if any, during the last
  execution.

* `start_time` -
  (Output)
  The last execution start time of the plugin instance.

* `end_time` -
  (Output)
  The last execution end time of the plugin instance.

<a name="nested_actions_curation_config"></a>The `curation_config` block supports:

* `custom_curation` -
  (Optional)
  Custom curation information for this plugin instance.
  Structure is [documented below](#nested_actions_curation_config_custom_curation).

* `curation_type` -
  (Required)
  Possible values:
  CURATION_TYPE_UNSPECIFIED
  DEFAULT_CURATION_FOR_API_METADATA
  CUSTOM_CURATION_FOR_API_METADATA


<a name="nested_actions_curation_config_custom_curation"></a>The `custom_curation` block supports:

* `curation` -
  (Required)
  The unique name of the curation resource. This will be the name of the
  curation resource in the format:
  `projects/{project}/locations/{location}/curations/{curation}`

<a name="nested_auth_config"></a>The `auth_config` block supports:

* `google_service_account_config` -
  (Optional)
  Config for Google service account authentication.
  Structure is [documented below](#nested_auth_config_google_service_account_config).

* `user_password_config` -
  (Optional)
  Parameters to support Username and Password Authentication.
  Structure is [documented below](#nested_auth_config_user_password_config).

* `api_key_config` -
  (Optional)
  Config for authentication with API key.
  Structure is [documented below](#nested_auth_config_api_key_config).

* `oauth2_client_credentials_config` -
  (Optional)
  Parameters to support Oauth 2.0 client credentials grant authentication.
  See https://tools.ietf.org/html/rfc6749#section-1.3.4 for more details.
  Structure is [documented below](#nested_auth_config_oauth2_client_credentials_config).

* `auth_type` -
  (Required)
  Possible values:
  AUTH_TYPE_UNSPECIFIED
  NO_AUTH
  GOOGLE_SERVICE_ACCOUNT
  USER_PASSWORD
  API_KEY
  OAUTH2_CLIENT_CREDENTIALS


<a name="nested_auth_config_google_service_account_config"></a>The `google_service_account_config` block supports:

* `service_account` -
  (Required)
  The service account to be used for authenticating request.
  The `iam.serviceAccounts.getAccessToken` permission should be granted on
  this service account to the impersonator service account.

<a name="nested_auth_config_user_password_config"></a>The `user_password_config` block supports:

* `username` -
  (Required)
  Username.

* `password` -
  (Required)
  Secret provides a reference to entries in Secret Manager.
  Structure is [documented below](#nested_auth_config_user_password_config_password).


<a name="nested_auth_config_user_password_config_password"></a>The `password` block supports:

* `secret_version` -
  (Required)
  The resource name of the secret version in the format,
  format as: `projects/*/secrets/*/versions/*`.

<a name="nested_auth_config_api_key_config"></a>The `api_key_config` block supports:

* `name` -
  (Required)
  The parameter name of the API key.
  E.g. If the API request is "https://example.com/act?api_key=",
  "api_key" would be the parameter name.

* `api_key` -
  (Required)
  Secret provides a reference to entries in Secret Manager.
  Structure is [documented below](#nested_auth_config_api_key_config_api_key).

* `http_element_location` -
  (Required)
  The location of the API key.
  The default value is QUERY.
  Possible values:
  HTTP_ELEMENT_LOCATION_UNSPECIFIED
  QUERY
  HEADER
  PATH
  BODY
  COOKIE


<a name="nested_auth_config_api_key_config_api_key"></a>The `api_key` block supports:

* `secret_version` -
  (Required)
  The resource name of the secret version in the format,
  format as: `projects/*/secrets/*/versions/*`.

<a name="nested_auth_config_oauth2_client_credentials_config"></a>The `oauth2_client_credentials_config` block supports:

* `client_secret` -
  (Required)
  Secret provides a reference to entries in Secret Manager.
  Structure is [documented below](#nested_auth_config_oauth2_client_credentials_config_client_secret).

* `client_id` -
  (Required)
  The client identifier.


<a name="nested_auth_config_oauth2_client_credentials_config_client_secret"></a>The `client_secret` block supports:

* `secret_version` -
  (Required)
  The resource name of the secret version in the format,
  format as: `projects/*/secrets/*/versions/*`.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/plugins/{{plugin}}/instances/{{plugin_instance_id}}`

* `name` -
  Identifier. The unique name of the plugin instance resource.
  Format:
  `projects/{project}/locations/{location}/plugins/{plugin}/instances/{instance}`

* `state` -
  The current state of the plugin instance (e.g., enabled, disabled,
  provisioning).
  Possible values:
  STATE_UNSPECIFIED
  CREATING
  ACTIVE
  APPLYING_CONFIG
  ERROR
  FAILED
  DELETING

* `create_time` -
  Timestamp indicating when the plugin instance was created.

* `update_time` -
  Timestamp indicating when the plugin instance was last updated.

* `error_message` -
  Error message describing the failure, if any, during Create, Delete or
  ApplyConfig operation corresponding to the plugin instance.This field will
  only be populated if the plugin instance is in the ERROR or FAILED state.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


PluginInstance can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/plugins/{{plugin}}/instances/{{plugin_instance_id}}`
* `{{project}}/{{location}}/{{plugin}}/{{plugin_instance_id}}`
* `{{location}}/{{plugin}}/{{plugin_instance_id}}`

In Terraform v1.12.0 and later, use an [`identity` block](https://developer.hashicorp.com/terraform/language/resources/identities) to import PluginInstance using identity values. For example:

```tf
import {
  identity = {
    location = "<-required value->"
    plugin = "<-required value->"
    pluginInstanceId = "<-required value->"
    project = "<-optional value->"
  }
  to = google_apihub_plugin_instance.default
}
```

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import PluginInstance using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/plugins/{{plugin}}/instances/{{plugin_instance_id}}"
  to = google_apihub_plugin_instance.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), PluginInstance can be imported using one of the formats above. For example:

```
$ terraform import google_apihub_plugin_instance.default projects/{{project}}/locations/{{location}}/plugins/{{plugin}}/instances/{{plugin_instance_id}}
$ terraform import google_apihub_plugin_instance.default {{project}}/{{location}}/{{plugin}}/{{plugin_instance_id}}
$ terraform import google_apihub_plugin_instance.default {{location}}/{{plugin}}/{{plugin_instance_id}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
