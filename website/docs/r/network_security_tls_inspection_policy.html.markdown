---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This file is automatically generated by Magic Modules and manual
#     changes will be clobbered when the file is regenerated.
#
#     Please read more about how to change this file in
#     .github/CONTRIBUTING.md.
#
# ----------------------------------------------------------------------------
subcategory: "Network security"
description: |-
  The TlsInspectionPolicy resource contains references to CA pools in Certificate Authority Service and associated metadata.
---

# google\_network\_security\_tls\_inspection\_policy

The TlsInspectionPolicy resource contains references to CA pools in Certificate Authority Service and associated metadata.

~> **Warning:** This resource is in beta, and should be used with the terraform-provider-google-beta provider.
See [Provider Versions](https://terraform.io/docs/providers/google/guides/provider_versions.html) for more details on beta resources.

To get more information about TlsInspectionPolicy, see:

* [API documentation](https://cloud.google.com/secure-web-proxy/docs/reference/network-security/rest/v1beta1/projects.locations.tlsInspectionPolicies)
* How-to Guides
    * [Use TlsInspectionPolicy](https://cloud.google.com/secure-web-proxy/docs/tls-inspection-overview)

<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=network_security_tls_inspection_policy_basic&cloudshell_image=gcr.io%2Fgraphite-cloud-shell-images%2Fterraform%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Network Security Tls Inspection Policy Basic


```hcl
resource "google_privateca_ca_pool" "default" {
  provider = google-beta
  name      = "my-basic-ca-pool"
  location  = "us-central1"
  tier     = "DEVOPS"
  publishing_options {
    publish_ca_cert = false
    publish_crl = false
  }
  issuance_policy {
    maximum_lifetime = "1209600s"
    baseline_values {
      ca_options {
        is_ca = false
      }
      key_usage {
        base_key_usage {}
        extended_key_usage {
          server_auth = true
        }
      }
    }
  }
}


resource "google_privateca_certificate_authority" "default" {
  provider = google-beta
  pool = google_privateca_ca_pool.default.name
  certificate_authority_id = "my-basic-certificate-authority"
  location = "us-central1"
  lifetime = "86400s"
  type = "SELF_SIGNED"
  deletion_protection = false
  skip_grace_period = true
  ignore_active_certificates_on_deletion = true
  config {
    subject_config {
      subject {
        organization = "Test LLC"
        common_name = "my-ca"
      }
    }
    x509_config {
      ca_options {
        is_ca = true
      }
      key_usage {
        base_key_usage {
          cert_sign = true
          crl_sign = true
        }
        extended_key_usage {
          server_auth = false
        }
      }
    }
  }
  key_spec {
    algorithm = "RSA_PKCS1_4096_SHA256"
  }
}

resource "google_project_service_identity" "ns_sa" {
  provider = google-beta

  service = "networksecurity.googleapis.com"
}

resource "google_privateca_ca_pool_iam_member" "tls_inspection_permission" {
  provider = google-beta

  ca_pool = google_privateca_ca_pool.default.id
  role = "roles/privateca.certificateManager"
  member = "serviceAccount:${google_project_service_identity.ns_sa.email}"
}

resource "google_network_security_tls_inspection_policy" "default" {
  provider = google-beta
  name     = "my-tls-inspection-policy"
  location = "us-central1"
  ca_pool  = google_privateca_ca_pool.default.id
  exclude_public_ca_set = false
  depends_on = [google_privateca_ca_pool.default, google_privateca_certificate_authority.default, google_privateca_ca_pool_iam_member.tls_inspection_permission]
}
```

## Argument Reference

The following arguments are supported:


* `ca_pool` -
  (Required)
  A CA pool resource used to issue interception certificates.

* `name` -
  (Required)
  Short name of the TlsInspectionPolicy resource to be created.


- - -


* `description` -
  (Optional)
  Free-text description of the resource.

* `exclude_public_ca_set` -
  (Optional)
  If FALSE (the default), use our default set of public CAs in addition to any CAs specified in trustConfig. These public CAs are currently based on the Mozilla Root Program and are subject to change over time. If TRUE, do not accept our default set of public CAs. Only CAs specified in trustConfig will be accepted.

* `location` -
  (Optional)
  The location of the tls inspection policy.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.


## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/tlsInspectionPolicies/{{name}}`

* `create_time` -
  The timestamp when the resource was created.

* `update_time` -
  The timestamp when the resource was updated.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 30 minutes.
- `update` - Default is 30 minutes.
- `delete` - Default is 30 minutes.

## Import


TlsInspectionPolicy can be imported using any of these accepted formats:

```
$ terraform import google_network_security_tls_inspection_policy.default projects/{{project}}/locations/{{location}}/tlsInspectionPolicies/{{name}}
$ terraform import google_network_security_tls_inspection_policy.default {{project}}/{{location}}/{{name}}
$ terraform import google_network_security_tls_inspection_policy.default {{location}}/{{name}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
