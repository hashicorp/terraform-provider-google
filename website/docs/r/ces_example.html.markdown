---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/ces/Example.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Customer Engagement Suite"
description: |-
  An example represents a sample conversation between the user and the agent(s).
---

# google_ces_example

An example represents a sample conversation between the user and the agent(s).



<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=ces_example_basic&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Ces Example Basic


```hcl
resource "google_ces_app" "my-app" {
    location     = "us"
    display_name = "my-app"
    app_id       = "app-id"
    time_zone_settings {
        time_zone = "America/Los_Angeles"
    }
}

resource "google_ces_tool" "ces_tool" {
    location       = "us"
    app            = google_ces_app.my-app.app_id
    tool_id        = "tool-1"
    execution_type = "SYNCHRONOUS"
    python_function {
        name = "example_function"
        python_code = "def example_function() -> int: return 0"
    }
}

resource "google_ces_toolset" "ces_toolset" {
    toolset_id   = "toolset-id"

    location     = "us"
    app          = google_ces_app.my-app.app_id
    display_name = "Basic toolset display name"

    open_api_toolset {
        open_api_schema = <<-EOT
        openapi: 3.0.0
        info:
            title: My Sample API
            version: 1.0.0
            description: A simple API example
        servers:
            - url: https://api.example.com/v1
        paths: {}
        EOT
        ignore_unknown_fields = false
        tls_config {
            ca_certs {
            display_name="example"
            cert="ZXhhbXBsZQ=="
            }
        }
        service_directory_config {
        service = "projects/example/locations/us/namespaces/namespace/services/service"
        }
        api_authentication {
            service_agent_id_token_auth_config {
            }
        }
    }
}

resource "google_ces_agent" "ces_base_agent" {
    agent_id = "base-agent-id"
    location = "us"
    app      = google_ces_app.my-app.app_id
    display_name = "base agent"

    instruction = "You are a helpful assistant for this example."

    model_settings {
        model       = "gemini-2.5-flash"
        temperature = 0.5
    }

    llm_agent {
    }
}

resource "google_ces_agent" "ces_child_agent" {
    agent_id = "child-agent-id"
    location = "us"
    app      = google_ces_app.my-app.app_id
    display_name = "child agent"

    instruction = "You are a helpful assistant for this example."

    model_settings {
        model       = "gemini-2.5-flash"
        temperature = 0.5
    }

    llm_agent {
    }
}

resource "google_ces_example" "my-example" {
    location     = "us"
    display_name = "my-example"
    app          = google_ces_app.my-app.name
    example_id   = "example-id"
    description  = "example description"
    entry_agent  = "projects/${google_ces_app.my-app.project}/locations/us/apps/${google_ces_app.my-app.app_id}/agents/${google_ces_agent.ces_base_agent.agent_id}"
    messages {
        chunks {
            agent_transfer {
                target_agent = "projects/${google_ces_app.my-app.project}/locations/us/apps/${google_ces_app.my-app.app_id}/agents/${google_ces_agent.ces_child_agent.agent_id}"
            }
        }
        chunks {
            image {
                mime_type = "image/png"
                data = base64encode("This is some fake image binary data.")
            }
        }
        chunks {
            text = "text_data"
        }
        chunks {
            tool_call {
                args = jsonencode({
                    arg1 = "val1"
                    arg2 = "val2"
                })
                id = "tool_call_id"
                tool = "projects/${google_ces_app.my-app.project}/locations/us/apps/${google_ces_app.my-app.app_id}/tools/${google_ces_tool.ces_tool.tool_id}"
            }
        }
        chunks {
            tool_call {
                args = jsonencode({
                    arg1 = "val1"
                    arg2 = "val2"
                })
                id = "tool_call_id2"
                toolset_tool {
                    toolset = "projects/${google_ces_app.my-app.project}/locations/us/apps/${google_ces_app.my-app.app_id}/toolsets/${google_ces_toolset.ces_toolset.toolset_id}"
                    tool_id = "example-id"
                }
            }
        }
        chunks {
            tool_response {
                id = "tool_call_id"
                response = jsonencode({
                    output = "example-output"
                })
                tool = "projects/${google_ces_app.my-app.project}/locations/us/apps/${google_ces_app.my-app.app_id}/tools/${google_ces_tool.ces_tool.tool_id}"
            }
        }
        chunks {
            tool_response {
                id = "tool_call_id2"
                response = jsonencode({
                    output = "example-output"
                })
                toolset_tool {
                    toolset = "projects/${google_ces_app.my-app.project}/locations/us/apps/${google_ces_app.my-app.app_id}/toolsets/${google_ces_toolset.ces_toolset.toolset_id}"
                    tool_id = "example-id"
                }
            }
        }
        chunks {
            updated_variables = jsonencode({
                var1 = "val1"
                var2 = "val2"
            })
        }
        role = "agent"
    }
}
```

## Argument Reference

The following arguments are supported:


* `display_name` -
  (Required)
  Display name of the example.

* `location` -
  (Required)
  Resource ID segment making up resource `name`, defining what region the parent app is in. It identifies the resource within its parent collection as described in https://google.aip.dev/122.

* `app` -
  (Required)
  Resource ID segment making up resource `name`, defining the app the example belongs to. It identifies the resource within its parent collection as described in https://google.aip.dev/122.

* `example_id` -
  (Required)
  The ID to use for the example, which will become the final component of
  the example's resource name. In Terraform, this field is required.


* `description` -
  (Optional)
  Human-readable description of the example.

* `entry_agent` -
  (Optional)
  The agent that initially handles the conversation. If not specified, the
  example represents a conversation that is handled by the root agent.
  Format: `projects/{project}/locations/{location}/apps/{app}/agents/{agent}`

* `messages` -
  (Optional)
  The collection of messages that make up the conversation.
  Structure is [documented below](#nested_messages).

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



<a name="nested_messages"></a>The `messages` block supports:

* `chunks` -
  (Optional)
  Content of the message as a series of chunks.
  Structure is [documented below](#nested_messages_messages_chunks).

* `role` -
  (Optional)
  The role within the conversation, e.g., user, agent.


<a name="nested_messages_messages_chunks"></a>The `chunks` block supports:

* `agent_transfer` -
  (Optional)
  Represents an event indicating the transfer of a conversation to a different
  agent.
  Structure is [documented below](#nested_messages_messages_chunks_chunks_agent_transfer).

* `image` -
  (Optional)
  Represents an image input or output in the conversation.
  Structure is [documented below](#nested_messages_messages_chunks_chunks_image).

* `text` -
  (Optional)
  Text data.

* `tool_call` -
  (Optional)
  Request for the client or the agent to execute the specified tool.
  Structure is [documented below](#nested_messages_messages_chunks_chunks_tool_call).

* `tool_response` -
  (Optional)
  The execution result of a specific tool from the client or the agent.
  Structure is [documented below](#nested_messages_messages_chunks_chunks_tool_response).

* `updated_variables` -
  (Optional)
  A struct represents variables that were updated in the conversation,
  keyed by variable names.


<a name="nested_messages_messages_chunks_chunks_agent_transfer"></a>The `agent_transfer` block supports:

* `display_name` -
  (Output)
  Display name of the agent.

* `target_agent` -
  (Required)
  The agent to which the conversation is being transferred. The agent will
  handle the conversation from this point forward.
  Format: `projects/{project}/locations/{location}/apps/{app}/agents/{agent}`

<a name="nested_messages_messages_chunks_chunks_image"></a>The `image` block supports:

* `data` -
  (Required)
  Raw bytes of the image.

* `mime_type` -
  (Required)
  The IANA standard MIME type of the source data.
  Supported image types includes:
  * image/png
  * image/jpeg
  * image/webp

<a name="nested_messages_messages_chunks_chunks_tool_call"></a>The `tool_call` block supports:

* `args` -
  (Optional)
  The input parameters and values for the tool in JSON object format.

* `display_name` -
  (Output)
  Display name of the tool.

* `id` -
  (Optional)
  The unique identifier of the tool call. If populated, the client should
  return the execution result with the matching ID in
  ToolResponse.

* `tool` -
  (Optional)
  The name of the tool to execute.
  Format: `projects/{project}/locations/{location}/apps/{app}/tools/{tool}`

* `toolset_tool` -
  (Optional)
  A tool that is created from a toolset.
  Structure is [documented below](#nested_messages_messages_chunks_chunks_tool_call_toolset_tool).


<a name="nested_messages_messages_chunks_chunks_tool_call_toolset_tool"></a>The `toolset_tool` block supports:

* `toolset` -
  (Required)
  The resource name of the Toolset from which this tool is derived.
  Format:
  `projects/{project}/locations/{location}/apps/{app}/toolsets/{toolset}`

* `tool_id` -
  (Optional)
  The tool ID to filter the tools to retrieve the schema for.

<a name="nested_messages_messages_chunks_chunks_tool_response"></a>The `tool_response` block supports:

* `display_name` -
  (Output)
  Display name of the tool.

* `id` -
  (Optional)
  The matching ID of the tool call the response is for.

* `response` -
  (Required)
  The tool execution result in JSON object format.
  Use "output" key to specify tool response and "error" key to specify
  error details (if any). If "output" and "error" keys are not specified,
  then whole "response" is treated as tool execution result.

* `tool` -
  (Optional)
  The name of the tool to execute.
  Format: `projects/{project}/locations/{location}/apps/{app}/tools/{tool}`

* `toolset_tool` -
  (Optional)
  A tool that is created from a toolset.
  Structure is [documented below](#nested_messages_messages_chunks_chunks_tool_response_toolset_tool).


<a name="nested_messages_messages_chunks_chunks_tool_response_toolset_tool"></a>The `toolset_tool` block supports:

* `toolset` -
  (Required)
  The resource name of the Toolset from which this tool is derived.
  Format:
  `projects/{project}/locations/{location}/apps/{app}/toolsets/{toolset}`

* `tool_id` -
  (Optional)
  The tool ID to filter the tools to retrieve the schema for.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/apps/{{app}}/examples/{{name}}`

* `create_time` -
  Timestamp when the example was created.

* `etag` -
  Etag used to ensure the object hasn't changed during a read-modify-write
  operation. If the etag is empty, the update will overwrite any concurrent
  changes.

* `invalid` -
  The example may become invalid if referencing resources are deleted.
  Invalid examples will not be used as few-shot examples.

* `name` -
  Identifier. The unique identifier of the example.
  Format:
  `projects/{project}/locations/{location}/apps/{app}/examples/{example}`

* `update_time` -
  Timestamp when the example was last updated.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


Example can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/apps/{{app}}/examples/{{name}}`
* `{{project}}/{{location}}/{{app}}/{{name}}`
* `{{location}}/{{app}}/{{name}}`

In Terraform v1.12.0 and later, use an [`identity` block](https://developer.hashicorp.com/terraform/language/resources/identities) to import Example using identity values. For example:

```tf
import {
  identity = {
    name = "<-optional value->"
    location = "<-required value->"
    app = "<-required value->"
    project = "<-optional value->"
  }
  to = google_ces_example.default
}
```

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Example using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/apps/{{app}}/examples/{{name}}"
  to = google_ces_example.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), Example can be imported using one of the formats above. For example:

```
$ terraform import google_ces_example.default projects/{{project}}/locations/{{location}}/apps/{{app}}/examples/{{name}}
$ terraform import google_ces_example.default {{project}}/{{location}}/{{app}}/{{name}}
$ terraform import google_ces_example.default {{location}}/{{app}}/{{name}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
