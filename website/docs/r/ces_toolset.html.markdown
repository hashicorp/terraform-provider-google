---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/ces/Toolset.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Customer Engagement Suite"
description: |-
  Description
---

# google_ces_toolset

Description



<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=ces_toolset_openapi_service_account_auth_config&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Ces Toolset Openapi Service Account Auth Config


```hcl
resource "google_ces_app" "ces_app_for_toolset" {
  app_id = "app-id"
  location = "us"
  description = "App used as parent for CES Toolset example"
  display_name = "my-app"

  language_settings {
    default_language_code    = "en-US"
    supported_language_codes = ["es-ES", "fr-FR"]
    enable_multilingual_support = true
    fallback_action          = "escalate"
  }
  time_zone_settings {
    time_zone = "America/Los_Angeles"
  }
}

resource "google_ces_toolset" "ces_toolset_openapi_service_account_auth_config" {
  toolset_id = "toolset1"
  location = "us"
  app      = google_ces_app.ces_app_for_toolset.app_id
  display_name = "Basic toolset display name"

  open_api_toolset {
    open_api_schema = <<-EOT
      openapi: 3.0.0
      info:
        title: My Sample API
        version: 1.0.0
        description: A simple API example
      servers:
        - url: https://api.example.com/v1
      paths: {}
    EOT
    ignore_unknown_fields = false
    tls_config {
        ca_certs {
          display_name="example"
          cert="ZXhhbXBsZQ=="
        }
    }
    service_directory_config {
      service = "projects/example/locations/us/namespaces/namespace/services/service"
    }
    api_authentication {
        service_account_auth_config {
            service_account = "testaccount@gmail.com"
        }
    }
  }
}
```
<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=ces_toolset_openapi_oauth_config&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Ces Toolset Openapi Oauth Config


```hcl
resource "google_ces_app" "ces_app_for_toolset" {
  app_id = "app-id"
  location = "us"
  description = "App used as parent for CES Toolset example"
  display_name = "my-app"

  language_settings {
    default_language_code    = "en-US"
    supported_language_codes = ["es-ES", "fr-FR"]
    enable_multilingual_support = true
    fallback_action          = "escalate"
  }
  time_zone_settings {
    time_zone = "America/Los_Angeles"
  }
}

resource "google_ces_toolset" "ces_toolset_openapi_oauth_config" {
  toolset_id = "toolset1"
  location = "us"
  app      = google_ces_app.ces_app_for_toolset.app_id
  display_name = "Basic toolset display name"

  open_api_toolset {
    open_api_schema = <<-EOT
      openapi: 3.0.0
      info:
        title: My Sample API
        version: 1.0.0
        description: A simple API example
      servers:
        - url: https://api.example.com/v1
      paths: {}
    EOT
    ignore_unknown_fields = false
    tls_config {
        ca_certs {
          display_name="example"
          cert="ZXhhbXBsZQ=="
        }
    }
    service_directory_config {
      service = "projects/example/locations/us/namespaces/namespace/services/service"
    }
    api_authentication {
        oauth_config {
            oauth_grant_type = "CLIENT_CREDENTIAL"
            client_id = "example_client_id"
            client_secret_version = "projects/fake-project/secrets/fake-secret/versions/version1"
            token_endpoint = "123"
            scopes = ["scope1"]
        }
    }
  }
}
```
<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=ces_toolset_openapi_service_agent_id_token_auth_config&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Ces Toolset Openapi Service Agent Id Token Auth Config


```hcl
resource "google_ces_app" "ces_app_for_toolset" {
  app_id = "app-id"
  location = "us"
  description = "App used as parent for CES Toolset example"
  display_name = "my-app"

  language_settings {
    default_language_code    = "en-US"
    supported_language_codes = ["es-ES", "fr-FR"]
    enable_multilingual_support = true
    fallback_action          = "escalate"
  }
  time_zone_settings {
    time_zone = "America/Los_Angeles"
  }
}

resource "google_ces_toolset" "ces_toolset_openapi_service_agent_id_token_auth_config" {
  toolset_id = "toolset1"
  location = "us"
  app      = google_ces_app.ces_app_for_toolset.app_id
  display_name = "Basic toolset display name"

  open_api_toolset {
    open_api_schema = <<-EOT
      openapi: 3.0.0
      info:
        title: My Sample API
        version: 1.0.0
        description: A simple API example
      servers:
        - url: https://api.example.com/v1
      paths: {}
    EOT
    ignore_unknown_fields = false
    tls_config {
        ca_certs {
          display_name="example"
          cert="ZXhhbXBsZQ=="
        }
    }
    service_directory_config {
      service = "projects/example/locations/us/namespaces/namespace/services/service"
    }
    api_authentication {
        service_agent_id_token_auth_config {
        }
    }
  }
}
```
<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=ces_toolset_openapi_api_key_config&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Ces Toolset Openapi Api Key Config


```hcl
resource "google_ces_app" "ces_app_for_toolset" {
  app_id = "app-id"
  location = "us"
  description = "App used as parent for CES Toolset example"
  display_name = "my-app"

  language_settings {
    default_language_code    = "en-US"
    supported_language_codes = ["es-ES", "fr-FR"]
    enable_multilingual_support = true
    fallback_action          = "escalate"
  }
  time_zone_settings {
    time_zone = "America/Los_Angeles"
  }
}

resource "google_ces_toolset" "ces_toolset_openapi_api_key_config" {
  toolset_id = "toolset1"
  location = "us"
  app      = google_ces_app.ces_app_for_toolset.app_id
  display_name = "Basic toolset display name"
  description = "Test description"
  execution_type = "SYNCHRONOUS"

  open_api_toolset {
    open_api_schema = <<-EOT
      openapi: 3.0.0
      info:
        title: My Sample API
        version: 1.0.0
        description: A simple API example
      servers:
        - url: https://api.example.com/v1
      paths: {}
    EOT
    ignore_unknown_fields = false
    tls_config {
        ca_certs {
          display_name="example"
          cert="ZXhhbXBsZQ=="
        }
    }
    service_directory_config {
      service = "projects/example/locations/us/namespaces/namespace/services/service"
    }
    api_authentication {
        api_key_config {
            key_name = "ExampleKey"
            api_key_secret_version = "projects/fake-project/secrets/fake-secret/versions/version-1"
            request_location = "HEADER"
        }
    }
  }
}
```

## Argument Reference

The following arguments are supported:


* `location` -
  (Required)
  Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.

* `app` -
  (Required)
  Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.

* `toolset_id` -
  (Required)
  The ID to use for the toolset, which will become the final component of
  the toolset's resource name. If not provided, a unique ID will be
  automatically assigned for the toolset.


* `description` -
  (Optional)
  The description of the toolset.

* `display_name` -
  (Optional)
  The display name of the toolset. Must be unique within the same app.

* `execution_type` -
  (Optional)
  Possible values:
  SYNCHRONOUS
  ASYNCHRONOUS

* `open_api_toolset` -
  (Optional)
  A toolset that contains a list of tools that are defined by an OpenAPI
  schema.
  Structure is [documented below](#nested_open_api_toolset).

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



<a name="nested_open_api_toolset"></a>The `open_api_toolset` block supports:

* `api_authentication` -
  (Optional)
  Authentication information required for API calls.
  Structure is [documented below](#nested_open_api_toolset_api_authentication).

* `ignore_unknown_fields` -
  (Optional)
  If true, the agent will ignore unknown fields in the API response for all
  operations defined in the OpenAPI schema.

* `open_api_schema` -
  (Required)
  The OpenAPI schema of the toolset.

* `service_directory_config` -
  (Optional)
  Configuration for tools using Service Directory.
  Structure is [documented below](#nested_open_api_toolset_service_directory_config).

* `tls_config` -
  (Optional)
  The TLS configuration.
  Structure is [documented below](#nested_open_api_toolset_tls_config).

* `url` -
  (Output)
  The server URL of the Open API schema.
  This field is only set in toolsets in the environment dependencies
  during the export process if the schema contains a server url.
  During the import process, if this url is present in the environment dependencies
  and the schema has the $env_var placeholder,
  it will replace the placeholder in the schema.


<a name="nested_open_api_toolset_api_authentication"></a>The `api_authentication` block supports:

* `api_key_config` -
  (Optional)
  Configurations for authentication with API key.
  Structure is [documented below](#nested_open_api_toolset_api_authentication_api_key_config).

* `oauth_config` -
  (Optional)
  Configurations for authentication with OAuth.
  Structure is [documented below](#nested_open_api_toolset_api_authentication_oauth_config).

* `service_account_auth_config` -
  (Optional)
  Configurations for authentication using a custom service account.
  Structure is [documented below](#nested_open_api_toolset_api_authentication_service_account_auth_config).

* `service_agent_id_token_auth_config` -
  (Optional)
  Configurations for authentication with [ID
  token](https://cloud.google.com/docs/authentication/token-types#id) generated
  from service agent.


<a name="nested_open_api_toolset_api_authentication_api_key_config"></a>The `api_key_config` block supports:

* `api_key_secret_version` -
  (Required)
  The name of the SecretManager secret version resource storing the API key.
  Format: `projects/{project}/secrets/{secret}/versions/{version}`
  Note: You should grant `roles/secretmanager.secretAccessor` role to the CES
  service agent
  `service-@gcp-sa-ces.iam.gserviceaccount.com`.

* `key_name` -
  (Required)
  The parameter name or the header name of the API key.
  E.g., If the API request is "https://example.com/act?X-Api-Key=", "X-Api-Key" would be the parameter name.

* `request_location` -
  (Required)
  Key location in the request.
  Possible values:
  HEADER
  QUERY_STRING

<a name="nested_open_api_toolset_api_authentication_oauth_config"></a>The `oauth_config` block supports:

* `client_id` -
  (Required)
  The client ID from the OAuth provider.

* `client_secret_version` -
  (Required)
  The name of the SecretManager secret version resource storing the
  client secret.
  Format: `projects/{project}/secrets/{secret}/versions/{version}`
  Note: You should grant `roles/secretmanager.secretAccessor` role to the CES
  service agent
  `service-@gcp-sa-ces.iam.gserviceaccount.com`.

* `oauth_grant_type` -
  (Required)
  OAuth grant types.
  Possible values:
  CLIENT_CREDENTIAL

* `scopes` -
  (Optional)
  The OAuth scopes to grant.

* `token_endpoint` -
  (Required)
  The token endpoint in the OAuth provider to exchange for an access token.

<a name="nested_open_api_toolset_api_authentication_service_account_auth_config"></a>The `service_account_auth_config` block supports:

* `service_account` -
  (Required)
  The email address of the service account used for authenticatation. CES
  uses this service account to exchange an access token and the access token
  is then sent in the `Authorization` header of the request.
  The service account must have the
  `roles/iam.serviceAccountTokenCreator` role granted to the
  CES service agent
  `service-@gcp-sa-ces.iam.gserviceaccount.com`.

<a name="nested_open_api_toolset_service_directory_config"></a>The `service_directory_config` block supports:

* `service` -
  (Required)
  The name of [Service
  Directory](https://cloud.google.com/service-directory) service.
  Format:
  `projects/{project}/locations/{location}/namespaces/{namespace}/services/{service}`.
  Location of the service directory must be the same as the location of the
  app.

<a name="nested_open_api_toolset_tls_config"></a>The `tls_config` block supports:

* `ca_certs` -
  (Required)
  Specifies a list of allowed custom CA certificates for HTTPS
  verification.
  Structure is [documented below](#nested_open_api_toolset_tls_config_ca_certs).


<a name="nested_open_api_toolset_tls_config_ca_certs"></a>The `ca_certs` block supports:

* `cert` -
  (Required)
  The allowed custom CA certificates (in DER format) for
  HTTPS verification. This overrides the default SSL trust store. If this
  is empty or unspecified, CES will use Google's default trust
  store to verify certificates. N.B. Make sure the HTTPS server
  certificates are signed with "subject alt name". For instance a
  certificate can be self-signed using the following command,
  openssl x509 -req -days 200 -in example.com.csr \
  -signkey example.com.key \
  -out example.com.crt \
  -extfile <(printf "\nsubjectAltName='DNS:www.example.com'")

* `display_name` -
  (Required)
  The name of the allowed custom CA certificates. This
  can be used to disambiguate the custom CA certificates.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/apps/{{app}}/toolsets/{{toolset_id}}`

* `create_time` -
  Timestamp when the toolset was created.

* `etag` -
  ETag used to ensure the object hasn't changed during a read-modify-write
  operation. If the etag is empty, the update will overwrite any concurrent
  changes.

* `name` -
  Identifier. The unique identifier of the toolset.
  Format:
  `projects/{project}/locations/{location}/apps/{app}/toolsets/{toolset}`

* `update_time` -
  Timestamp when the toolset was last updated.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


Toolset can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/apps/{{app}}/toolsets/{{toolset_id}}`
* `{{project}}/{{location}}/{{app}}/{{toolset_id}}`
* `{{location}}/{{app}}/{{toolset_id}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Toolset using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/apps/{{app}}/toolsets/{{toolset_id}}"
  to = google_ces_toolset.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), Toolset can be imported using one of the formats above. For example:

```
$ terraform import google_ces_toolset.default projects/{{project}}/locations/{{location}}/apps/{{app}}/toolsets/{{toolset_id}}
$ terraform import google_ces_toolset.default {{project}}/{{location}}/{{app}}/{{toolset_id}}
$ terraform import google_ces_toolset.default {{location}}/{{app}}/{{toolset_id}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
