---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/colab/Schedule.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Colab Enterprise"
description: |-
  'Colab Enterprise Notebook Execution Schedules.
---

# google_colab_schedule

'Colab Enterprise Notebook Execution Schedules.'


To get more information about Schedule, see:

* [API documentation](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.schedules)
* How-to Guides
    * [Schedule a notebook run](https://cloud.google.com/colab/docs/schedule-notebook-run)

## Example Usage - Colab Schedule Basic


```hcl
resource "google_colab_runtime_template" "my_runtime_template" {
  name = "runtime-template"
  display_name = "Runtime template"
  location = "us-central1"

  machine_spec {
    machine_type     = "e2-standard-4"
  }

  network_spec {
    enable_internet_access = true
  }
}

resource "google_storage_bucket" "output_bucket" {
  name          = "my_bucket"
  location      = "US"
  force_destroy = true
  uniform_bucket_level_access = true
}

resource "google_storage_bucket_object" "notebook" {
  name   = "hello_world.ipynb"
  bucket = google_storage_bucket.output_bucket.name
  content = <<EOF
    {
      "cells": [
        {
          "cell_type": "code",
          "execution_count": null,
          "metadata": {},
          "outputs": [],
          "source": [
            "print(\"Hello, World!\")"
          ]
        }
      ],
      "metadata": {
        "kernelspec": {
          "display_name": "Python 3",
          "language": "python",
          "name": "python3"
        },
        "language_info": {
          "codemirror_mode": {
            "name": "ipython",
            "version": 3
          },
          "file_extension": ".py",
          "mimetype": "text/x-python",
          "name": "python",
          "nbconvert_exporter": "python",
          "pygments_lexer": "ipython3",
          "version": "3.8.5"
        }
      },
      "nbformat": 4,
      "nbformat_minor": 4
    }
    EOF
}

resource "google_colab_schedule" "schedule" {
  display_name = "basic-schedule"
  location = "us-west1"
  max_concurrent_run_count = 2
  cron = "TZ=America/Los_Angeles * * * * *"

  create_notebook_execution_job_request {
    notebook_execution_job {
      display_name = "Notebook execution"
      gcs_notebook_source {
        uri = "gs://${google_storage_bucket_object.notebook.bucket}/${google_storage_bucket_object.notebook.name}"
        generation = google_storage_bucket_object.notebook.generation
      }

      notebook_runtime_template_resource_name = "projects/${google_colab_runtime_template.my_runtime_template.project}/locations/${google_colab_runtime_template.my_runtime_template.location}/notebookRuntimeTemplates/${google_colab_runtime_template.my_runtime_template.name}"
      gcs_output_uri = "gs://${google_storage_bucket.output_bucket.name}"
      service_account = "my@service-account.com"
      }
  }

  depends_on = [
    google_colab_runtime_template.my_runtime_template,
    google_storage_bucket.output_bucket,
  ]
}
```
## Example Usage - Colab Schedule Paused


```hcl
resource "google_colab_runtime_template" "my_runtime_template" {
  name = "runtime-template"
  display_name = "Runtime template"
  location = "us-central1"

  machine_spec {
    machine_type     = "e2-standard-4"
  }

  network_spec {
    enable_internet_access = true
  }
}

resource "google_storage_bucket" "output_bucket" {
  name          = "my_bucket"
  location      = "US"
  force_destroy = true
  uniform_bucket_level_access = true
}

resource "google_storage_bucket_object" "notebook" {
  name   = "hello_world.ipynb"
  bucket = google_storage_bucket.output_bucket.name
  content = <<EOF
    {
      "cells": [
        {
          "cell_type": "code",
          "execution_count": null,
          "metadata": {},
          "outputs": [],
          "source": [
            "print(\"Hello, World!\")"
          ]
        }
      ],
      "metadata": {
        "kernelspec": {
          "display_name": "Python 3",
          "language": "python",
          "name": "python3"
        },
        "language_info": {
          "codemirror_mode": {
            "name": "ipython",
            "version": 3
          },
          "file_extension": ".py",
          "mimetype": "text/x-python",
          "name": "python",
          "nbconvert_exporter": "python",
          "pygments_lexer": "ipython3",
          "version": "3.8.5"
        }
      },
      "nbformat": 4,
      "nbformat_minor": 4
    }
    EOF
}

resource "google_colab_schedule" "schedule" {
  display_name = "paused-schedule"
  location = "us-west1"
  max_concurrent_run_count = 2
  cron = "TZ=America/Los_Angeles * * * * *"

  desired_state = "PAUSED"

  create_notebook_execution_job_request {
    notebook_execution_job {
      display_name = "Notebook execution"
      gcs_notebook_source {
        uri = "gs://${google_storage_bucket_object.notebook.bucket}/${google_storage_bucket_object.notebook.name}"
        generation = google_storage_bucket_object.notebook.generation
      }

      notebook_runtime_template_resource_name = "projects/${google_colab_runtime_template.my_runtime_template.project}/locations/${google_colab_runtime_template.my_runtime_template.location}/notebookRuntimeTemplates/${google_colab_runtime_template.my_runtime_template.name}"
      gcs_output_uri = "gs://${google_storage_bucket.output_bucket.name}"
      service_account = "my@service-account.com"
      }
  }

  depends_on = [
    google_colab_runtime_template.my_runtime_template,
    google_storage_bucket.output_bucket,
  ]
}
```
## Example Usage - Colab Schedule Full


```hcl
resource "google_colab_runtime_template" "my_runtime_template" {
  name = "runtime-template"
  display_name = "Runtime template"
  location = "us-central1"

  machine_spec {
    machine_type     = "e2-standard-4"
  }

  network_spec {
    enable_internet_access = true
  }
}

resource "google_storage_bucket" "output_bucket" {
  name          = "my_bucket"
  location      = "US"
  force_destroy = true
  uniform_bucket_level_access = true
}

resource "google_secret_manager_secret" "secret" {
  secret_id = "secret"
  replication {
    auto {}
  }
}

resource "google_secret_manager_secret_version" "secret_version" {
  secret = google_secret_manager_secret.secret.id
  secret_data = "secret-data"
}

resource "google_dataform_repository" "dataform_repository" {
  name = "dataform-repository"
  display_name = "dataform_repository"
  npmrc_environment_variables_secret_version = google_secret_manager_secret_version.secret_version.id
  kms_key_name = ""

  labels = {
    label_foo1 = "label-bar1"
  }

  git_remote_settings {
      url = "https://github.com/OWNER/REPOSITORY.git"
      default_branch = "main"
      authentication_token_secret_version = google_secret_manager_secret_version.secret_version.id
  }

  workspace_compilation_overrides {
    default_database = "database"
    schema_suffix = "_suffix"
    table_prefix = "prefix_"
  }

}

resource "google_colab_schedule" "schedule" {
  display_name = "full-schedule"
  location = "us-west1"
  allow_queueing = true
  max_concurrent_run_count = 2
  cron = "TZ=America/Los_Angeles * * * * *"
  max_run_count = 5
  start_time = "2014-10-02T15:01:23Z"
  end_time = "2014-10-10T15:01:23Z"

  desired_state = "ACTIVE"

  create_notebook_execution_job_request {
    notebook_execution_job {
      display_name = "Notebook execution"
      execution_timeout = "86400s"

      dataform_repository_source {
        commit_sha = "randomsha123"
        dataform_repository_resource_name = "projects/my-project-name/locations/us-west1/repositories/${google_dataform_repository.dataform_repository.name}"
      }

      notebook_runtime_template_resource_name = "projects/${google_colab_runtime_template.my_runtime_template.project}/locations/${google_colab_runtime_template.my_runtime_template.location}/notebookRuntimeTemplates/${google_colab_runtime_template.my_runtime_template.name}"

      gcs_output_uri = "gs://${google_storage_bucket.output_bucket.name}"
      service_account = "my@service-account.com"
    }
  }

  depends_on = [
    google_colab_runtime_template.my_runtime_template,
    google_storage_bucket.output_bucket,
    google_secret_manager_secret_version.secret_version,
    google_dataform_repository.dataform_repository,
  ]
}
```

## Argument Reference

The following arguments are supported:


* `display_name` -
  (Required)
  Required. The display name of the Schedule.

* `cron` -
  (Required)
  Cron schedule (https://en.wikipedia.org/wiki/Cron) to launch scheduled runs.

* `max_concurrent_run_count` -
  (Required)
  Maximum number of runs that can be started concurrently for this Schedule. This is the limit for starting the scheduled requests and not the execution of the notebook execution jobs created by the requests.

* `create_notebook_execution_job_request` -
  (Required)
  Request for google_colab_notebook_execution.
  Structure is [documented below](#nested_create_notebook_execution_job_request).

* `location` -
  (Required)
  The location for the resource: https://cloud.google.com/colab/docs/locations


<a name="nested_create_notebook_execution_job_request"></a>The `create_notebook_execution_job_request` block supports:

* `notebook_execution_job` -
  (Required)
  The NotebookExecutionJob to create.
  Structure is [documented below](#nested_create_notebook_execution_job_request_notebook_execution_job).


<a name="nested_create_notebook_execution_job_request_notebook_execution_job"></a>The `notebook_execution_job` block supports:

* `display_name` -
  (Required)
  Required. The display name of the Notebook Execution.

* `dataform_repository_source` -
  (Optional)
  The Dataform Repository containing the input notebook.
  Structure is [documented below](#nested_create_notebook_execution_job_request_notebook_execution_job_dataform_repository_source).

* `gcs_notebook_source` -
  (Optional)
  The Cloud Storage uri for the input notebook.
  Structure is [documented below](#nested_create_notebook_execution_job_request_notebook_execution_job_gcs_notebook_source).

* `execution_timeout` -
  (Optional)
  Max running time of the execution job in seconds (default 86400s / 24 hrs). A duration in seconds with up to nine fractional digits, ending with "s". Example: "3.5s".

* `notebook_runtime_template_resource_name` -
  (Required)
  The NotebookRuntimeTemplate to source compute configuration from.

* `gcs_output_uri` -
  (Required)
  The Cloud Storage location to upload the result to. Format:`gs://bucket-name`

* `execution_user` -
  (Optional)
  The user email to run the execution as.

* `service_account` -
  (Optional)
  The service account to run the execution as.


<a name="nested_create_notebook_execution_job_request_notebook_execution_job_dataform_repository_source"></a>The `dataform_repository_source` block supports:

* `dataform_repository_resource_name` -
  (Required)
  The resource name of the Dataform Repository.

* `commit_sha` -
  (Optional)
  The commit SHA to read repository with. If unset, the file will be read at HEAD.

<a name="nested_create_notebook_execution_job_request_notebook_execution_job_gcs_notebook_source"></a>The `gcs_notebook_source` block supports:

* `uri` -
  (Required)
  The Cloud Storage uri pointing to the ipynb file. Format: gs://bucket/notebook_file.ipynb

* `generation` -
  (Optional)
  The version of the Cloud Storage object to read. If unset, the current version of the object is read. See https://cloud.google.com/storage/docs/metadata#generation-number.

- - -


* `start_time` -
  (Optional)
  The timestamp after which the first run can be scheduled. Defaults to the schedule creation time. Must be in the RFC 3339 (https://www.ietf.org/rfc/rfc3339.txt) format.

* `end_time` -
  (Optional)
  Timestamp after which no new runs can be scheduled. If specified, the schedule will be completed when either end_time is reached or when scheduled_run_count >= max_run_count. Must be in the RFC 3339 (https://www.ietf.org/rfc/rfc3339.txt) format.

* `max_run_count` -
  (Optional)
  Maximum run count of the schedule. If specified, The schedule will be completed when either startedRunCount >= maxRunCount or when endTime is reached. If not specified, new runs will keep getting scheduled until this Schedule is paused or deleted. Already scheduled runs will be allowed to complete. Unset if not specified.

* `allow_queueing` -
  (Optional)
  Whether new scheduled runs can be queued when max_concurrent_runs limit is reached. If set to true, new runs will be queued instead of skipped. Default to false.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.

* `desired_state` - (Optional) Desired state of the Colab Schedule. Set this field to `ACTIVE` to start/resume the schedule, and `PAUSED` to pause the schedule.


## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/schedules/{{name}}`

* `name` -
  The resource name of the Schedule

* `state` -
  Output only. The state of the schedule.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


Schedule can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/schedules/{{name}}`
* `{{project}}/{{location}}/{{name}}`
* `{{location}}/{{name}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Schedule using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/schedules/{{name}}"
  to = google_colab_schedule.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), Schedule can be imported using one of the formats above. For example:

```
$ terraform import google_colab_schedule.default projects/{{project}}/locations/{{location}}/schedules/{{name}}
$ terraform import google_colab_schedule.default {{project}}/{{location}}/{{name}}
$ terraform import google_colab_schedule.default {{location}}/{{name}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
