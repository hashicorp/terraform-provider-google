---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/bigquerydatapolicyv2/DataPolicy.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "BigQuery Data Policy V2"
description: |-
  BigQuery Data Policy
---

# google_bigquery_datapolicyv2_data_policy

BigQuery Data Policy


To get more information about DataPolicy, see:

* [API documentation](https://cloud.google.com/bigquery/docs/reference/bigquerydatapolicy/rest/v2/projects.locations.dataPolicies)
* How-to Guides
    * [Official Documentation](https://cloud.google.com/bigquery/docs/column-data-masking-intro)

<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=bigquery_datapolicyv2_datapolicy_basic&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Bigquery Datapolicyv2 Datapolicy Basic


```hcl
resource "google_bigquery_datapolicyv2_data_policy" "basic_data_policy" {
  location         = "us-central1"
  data_policy_type = "RAW_DATA_ACCESS_POLICY"
  data_policy_id   = "basic_data_policy"
}
```
<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=bigquery_datapolicyv2_datapolicy_predefined_masking&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Bigquery Datapolicyv2 Datapolicy Predefined Masking


```hcl
resource "google_bigquery_datapolicyv2_data_policy" "predefined_masking_data_policy" {
  location         = "us-central1"
  data_policy_type = "DATA_MASKING_POLICY"
  data_masking_policy {
    predefined_expression = "SHA256"
  }
  data_policy_id   = "predefined_masking_data_policy"
}
```
<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=bigquery_datapolicyv2_datapolicy_routine&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Bigquery Datapolicyv2 Datapolicy Routine


```hcl
resource "google_bigquery_datapolicyv2_data_policy" "routine_data_policy" {
  location         = "us-central1"
  data_policy_id   = "routine_data_policy"
	data_policy_type = "DATA_MASKING_POLICY"  
	data_masking_policy {
		routine = google_bigquery_routine.custom_masking_routine.id
	}
}

resource "google_bigquery_dataset" "test" {
  dataset_id = "dataset_id"
  location   = "us-central1"
}

resource "google_bigquery_routine" "custom_masking_routine" {
	dataset_id           = google_bigquery_dataset.test.dataset_id
	routine_id           = "custom_masking_routine"
	routine_type         = "SCALAR_FUNCTION"
	language             = "SQL"
	data_governance_type = "DATA_MASKING"
	definition_body      = "SAFE.REGEXP_REPLACE(ssn, '[0-9]', 'X')"
	return_type          = "{\"typeKind\" :  \"STRING\"}"

	arguments {
	  name = "ssn"
	  data_type = "{\"typeKind\" :  \"STRING\"}"
	} 
}
```
## Example Usage - Bigquery Datapolicyv2 Datapolicy Withgrantees


```hcl
resource "google_bigquery_datapolicyv2_data_policy" "data_policy_with_grantees" {
  location         = "us-central1"
  data_policy_type = "RAW_DATA_ACCESS_POLICY"
  grantees = [
    "principal://goog/subject/jane@example.com"
  ]
  data_policy_id   = "data_policy_with_grantees"
}
```

## Argument Reference

The following arguments are supported:


* `data_policy_type` -
  (Required)
  Type of data policy.
  Possible values:
  DATA_MASKING_POLICY
  RAW_DATA_ACCESS_POLICY
  COLUMN_LEVEL_SECURITY_POLICY

* `data_policy_id` -
  (Required)
  User-assigned (human readable) ID of the data policy that needs to be
  unique within a project. Used as {data_policy_id} in part of the resource
  name.

* `location` -
  (Required)
  Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.


* `data_masking_policy` -
  (Optional)
  The policy used to specify data masking rule.
  Structure is [documented below](#nested_data_masking_policy).

* `grantees` -
  (Optional)
  The list of IAM principals that have Fine Grained Access to the underlying
  data goverened by this data policy.
  Uses the [IAM V2 principal
  syntax](https://cloud.google.com/iam/docs/principal-identifiers#v2) Only
  supports principal types users, groups, serviceaccounts, cloudidentity.
  This field is supported in V2 Data Policy only. In case of V1 data policies
  (i.e. verion = 1 and policy_tag is set), this field is not populated.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



<a name="nested_data_masking_policy"></a>The `data_masking_policy` block supports:

* `predefined_expression` -
  (Optional)
  A predefined masking expression.
  Possible values:
  SHA256
  ALWAYS_NULL
  DEFAULT_MASKING_VALUE
  LAST_FOUR_CHARACTERS
  FIRST_FOUR_CHARACTERS
  EMAIL_MASK
  DATE_YEAR_MASK
  RANDOM_HASH

* `routine` -
  (Optional)
  The name of the BigQuery routine that contains the custom masking
  routine, in the format of
  `projects/{project_number}/datasets/{dataset_id}/routines/{routine_id}`.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/locations/{{location}}/dataPolicies/{{data_policy_id}}`

* `etag` -
  The etag for this Data Policy.
  This field is used for UpdateDataPolicy calls. If Data Policy exists, this
  field is required and must match the server's etag. It will also be
  populated in the response of GetDataPolicy, CreateDataPolicy, and
  UpdateDataPolicy calls.

* `name` -
  Identifier. Resource name of this data policy, in the format of
  `projects/{project_number}/locations/{location_id}/dataPolicies/{data_policy_id}`.

* `policy_tag` -
  Policy tag resource name, in the format of
  `projects/{project_number}/locations/{location_id}/taxonomies/{taxonomy_id}/policyTags/{policyTag_id}`.
  policy_tag is supported only for V1 data policies.

* `version` -
  The version of the Data Policy resource.
  Possible values:
  V1
  V2


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


DataPolicy can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/dataPolicies/{{data_policy_id}}`
* `{{project}}/{{location}}/{{data_policy_id}}`
* `{{location}}/{{data_policy_id}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import DataPolicy using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/dataPolicies/{{data_policy_id}}"
  to = google_bigquery_datapolicyv2_data_policy.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), DataPolicy can be imported using one of the formats above. For example:

```
$ terraform import google_bigquery_datapolicyv2_data_policy.default projects/{{project}}/locations/{{location}}/dataPolicies/{{data_policy_id}}
$ terraform import google_bigquery_datapolicyv2_data_policy.default {{project}}/{{location}}/{{data_policy_id}}
$ terraform import google_bigquery_datapolicyv2_data_policy.default {{location}}/{{data_policy_id}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
