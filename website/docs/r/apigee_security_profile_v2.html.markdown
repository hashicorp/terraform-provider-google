---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/apigee/SecurityProfileV2.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Apigee"
description: |-
  Security profile for risk assessment version 2 in Apigee.
---

# google_apigee_security_profile_v2

Security profile for risk assessment version 2 in Apigee.


To get more information about SecurityProfileV2, see:

* [API documentation](https://cloud.google.com/apigee/docs/reference/apis/apigee/rest/v1/organizations.securityProfilesV2/create)
* How-to Guides
    * [Creating a security profile](https://cloud.google.com/apigee/docs/api-security/security-scores#security-profiles-v2)

## Example Usage - Apigee Security Profile V2 Basic


```hcl
data "google_client_config" "current" {}

resource "google_compute_network" "apigee_network" {
  name = "apigee-network"
}

resource "google_compute_global_address" "apigee_range" {
  name          = "apigee-range"
  purpose       = "VPC_PEERING"
  address_type  = "INTERNAL"
  prefix_length = 16
  network       = google_compute_network.apigee_network.id
}

resource "google_service_networking_connection" "apigee_vpc_connection" {
  network                 = google_compute_network.apigee_network.id
  service                 = "servicenetworking.googleapis.com"
  reserved_peering_ranges = [google_compute_global_address.apigee_range.name]
}

resource "google_apigee_organization" "apigee_org" {
  analytics_region   = "us-central1"
  project_id         = data.google_client_config.current.project
  authorized_network = google_compute_network.apigee_network.id
  depends_on         = [google_service_networking_connection.apigee_vpc_connection]
}

resource "google_apigee_addons_config" "apigee_org_security_addons_config" {
  org = google_apigee_organization.apigee_org.name
  addons_config {
    api_security_config {
      enabled = true
    }
  }
}

resource "google_apigee_security_profile_v2" "security_profile_v2" {
  profile_id  = "my-profile"
  org_id      = google_apigee_organization.apigee_org.id
  description = "terraform test description"
  profile_assessment_configs {
    assessment = "auth-policies-check"
    weight     = "MAJOR"
  }
  profile_assessment_configs {
    assessment = "mediation-policies-check"
    weight     = "MODERATE"
  }
  profile_assessment_configs {
    assessment = "threat-policies-check"
    weight     = "MINOR"
  }
  depends_on = [
    google_apigee_addons_config.apigee_org_security_addons_config
  ]
}
```

## Argument Reference

The following arguments are supported:


* `profile_assessment_configs` -
  (Required)
  A map of the assessment name and the assessment config.
  Structure is [documented below](#nested_profile_assessment_configs).

* `org_id` -
  (Required)
  The Apigee Organization associated with the Apigee Security Profile V2,
  in the format `organizations/{{org_name}}`.

* `profile_id` -
  (Required)
  Resource ID of the security profile.


* `description` -
  (Optional)
  Description of the security profile.

* `deletion_policy` - (Optional) Whether Terraform will be prevented from destroying the resource. Defaults to DELETE.
	When a 'terraform destroy' or 'terraform apply' would delete the resource,
	the command will fail if this field is set to "PREVENT" in Terraform state.
	When set to "ABANDON", the command will remove the resource from Terraform
	management without updating or deleting the resource in the API.
	When set to "DELETE", deleting the resource is allowed.


<a name="nested_profile_assessment_configs"></a>The `profile_assessment_configs` block supports:

* `assessment` - (Required) The identifier for this object. Format specified above.

* `weight` -
  (Required)
  The weight of the assessment.
  Possible values are: `MINOR`, `MODERATE`, `MAJOR`.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `{{org_id}}/securityProfilesV2/{{profile_id}}`

* `name` -
  Name of the security profile v2 resource,
  in the format `organizations/{{org_name}}/securityProfilesV2/{{profile_id}}`.

* `create_time` -
  The timestamp at which this profile was created.

* `update_time` -
  The timestamp at which this profile was most recently updated.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


SecurityProfileV2 can be imported using any of these accepted formats:

* `{{org_id}}/securityProfilesV2/{{profile_id}}`
* `{{org_id}}/{{profile_id}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import SecurityProfileV2 using one of the formats above. For example:

```tf
import {
  id = "{{org_id}}/securityProfilesV2/{{profile_id}}"
  to = google_apigee_security_profile_v2.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), SecurityProfileV2 can be imported using one of the formats above. For example:

```
$ terraform import google_apigee_security_profile_v2.default {{org_id}}/securityProfilesV2/{{profile_id}}
$ terraform import google_apigee_security_profile_v2.default {{org_id}}/{{profile_id}}
```
