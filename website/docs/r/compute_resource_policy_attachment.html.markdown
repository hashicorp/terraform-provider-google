---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/compute/ResourcePolicyAttachment.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Compute Engine"
description: |-
  Adds existing resource policies to a compute instance.
---

# google_compute_resource_policy_attachment

Adds existing resource policies to a compute instance. You can only add one policy
which will be applied to this instance for scheduling start/stop operations.

This resource can be used instead of setting the resource_policy directly in the
compute instance resource to avoid dependency issues when using instance-level IAM
permissions.



<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=compute_resource_policy_attachment_basic&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Compute Resource Policy Attachment Basic


```hcl
resource "google_compute_instance" "instance" {
  name         = "my-instance"
  machine_type = "e2-medium"
  zone         = "us-central1-a"

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network = "default"
    access_config {}
  }
  
  lifecycle {
    ignore_changes = [resource_policies]
  }
}

resource "google_compute_resource_policy" "policy" {
  name   = "my-resource-policy"
  region = "us-central1"
  
  instance_schedule_policy {
    vm_start_schedule {
      schedule = "0 8 * * *"
    }
    
    vm_stop_schedule {
      schedule = "0 18 * * *"
    }
    
    time_zone = "America/New_York"
  }
}

resource "google_compute_resource_policy_attachment" "attachment" {
  name     = google_compute_resource_policy.policy.name
  instance = google_compute_instance.instance.name
  zone     = "us-central1-a"
}
```

## Argument Reference

The following arguments are supported:


* `name` -
  (Required)
  The resource policy to be attached to the instance for scheduling start/stop
  operations. Do not specify the self link.

* `instance` -
  (Required)
  The name of the instance in which the resource policies are attached to.


* `zone` -
  (Optional)
  A reference to the zone where the instance resides.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.

* `deletion_policy` - (Optional) Whether Terraform will be prevented from destroying the resource. Defaults to DELETE.
	When a 'terraform destroy' or 'terraform apply' would delete the resource,
	the command will fail if this field is set to "PREVENT" in Terraform state.
	When set to "ABANDON", the command will remove the resource from Terraform
	management without updating or deleting the resource in the API.
	When set to "DELETE", deleting the resource is allowed.


## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `{{project}}/{{zone}}/{{instance}}/{{name}}`


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


ResourcePolicyAttachment can be imported using any of these accepted formats:

* `projects/{{project}}/zones/{{zone}}/instances/{{instance}}/{{name}}`
* `{{project}}/{{zone}}/{{instance}}/{{name}}`
* `{{zone}}/{{instance}}/{{name}}`
* `{{instance}}/{{name}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import ResourcePolicyAttachment using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/zones/{{zone}}/instances/{{instance}}/{{name}}"
  to = google_compute_resource_policy_attachment.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), ResourcePolicyAttachment can be imported using one of the formats above. For example:

```
$ terraform import google_compute_resource_policy_attachment.default projects/{{project}}/zones/{{zone}}/instances/{{instance}}/{{name}}
$ terraform import google_compute_resource_policy_attachment.default {{project}}/{{zone}}/{{instance}}/{{name}}
$ terraform import google_compute_resource_policy_attachment.default {{zone}}/{{instance}}/{{name}}
$ terraform import google_compute_resource_policy_attachment.default {{instance}}/{{name}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
