---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/apihub/ApiHubInstance.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "API Hub"
description: |-
  An ApiHubInstance represents the instance resources of the API Hub.
---

# google_apihub_api_hub_instance

An ApiHubInstance represents the instance resources of the API Hub.
Currently, only one ApiHub instance is allowed for each project.
Currently, updation/deletion of ApiHub instance is not allowed.



## Example Usage - Apihub Api Hub Instance Basic


```hcl
resource "google_apihub_api_hub_instance" "apihub-instance-without-search"{
    location = "us-central1"
    config {
        disable_search = true
    }
}
```
## Example Usage - Apihub Api Hub Instance Full


```hcl
resource "google_apihub_api_hub_instance" "apihub-instance-search"{
    project = "my-project"
    api_hub_instance_id = "test-instance-full"
    description = "Test API hub instance"
    location = "us-central1"
    config {
        encryption_type = "CMEK"
        cmek_key_name = "projects/my-project/locations/us-central1/keyRings/apihub/cryptoKeys/apihub-key"
        disable_search = false
        vertex_location = "us"
    }
    labels = {
      environment = "dev"
    }
}
```

## Argument Reference

The following arguments are supported:


* `config` -
  (Required)
  Available configurations to provision an ApiHub Instance.
  Structure is [documented below](#nested_config).

* `location` -
  (Required)
  Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.


* `description` -
  (Optional)
  Optional. Description of the ApiHub instance.

* `labels` -
  (Optional)
  Optional. Instance labels to represent user-provided metadata.
  Refer to cloud documentation on labels for more details.
  https://cloud.google.com/compute/docs/labeling-resources
  **Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
  Please refer to the field `effective_labels` for all of the labels present on the resource.

* `api_hub_instance_id` -
  (Optional)
  Optional. Identifier to assign to the Api Hub instance. Must be unique within
  scope of the parent resource. If the field is not provided,
  system generated id will be used.
  This value should be 4-40 characters, and valid characters
  are `/a-z[0-9]-_/`.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



<a name="nested_config"></a>The `config` block supports:

* `encryption_type` -
  (Optional)
  Optional. Encryption type for the region. If the encryption type is CMEK, the
  cmek_key_name must be provided. If no encryption type is provided,
  GMEK will be used.
  Possible values:
  ENCRYPTION_TYPE_UNSPECIFIED
  GMEK
  CMEK

* `cmek_key_name` -
  (Optional)
  Optional. The Customer Managed Encryption Key (CMEK) used for data encryption.
  The CMEK name should follow the format of
  `projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)`,
  where the location must match the instance location.
  If the CMEK is not provided, a GMEK will be created for the instance.

* `disable_search` -
  (Optional)
  Optional. If true, the search will be disabled for the instance. The default value
  is false.

* `vertex_location` -
  (Optional)
  Optional. The name of the Vertex AI location where the data store is stored.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `{{name}}`

* `name` -
  Identifier. Format:
  `projects/{project}/locations/{location}/apiHubInstances/{apiHubInstance}`.

* `create_time` -
  Output only. Creation timestamp.

* `update_time` -
  Output only. Last update timestamp.

* `state` -
  Output only. The current state of the ApiHub instance.
  Possible values:
  STATE_UNSPECIFIED
  INACTIVE
  CREATING
  ACTIVE
  UPDATING
  DELETING
  FAILED

* `state_message` -
  Output only. Extra information about ApiHub instance state. Currently the message
  would be populated when state is `FAILED`.

* `terraform_labels` -
  The combination of labels configured directly on the resource
   and default labels configured on the provider.

* `effective_labels` -
  All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


ApiHubInstance can be imported using any of these accepted formats:

* `projects/{{project}}/locations/{{location}}/apiHubInstances/{{api_hub_instance_id}}`
* `{{project}}/{{location}}/{{api_hub_instance_id}}`
* `{{location}}/{{api_hub_instance_id}}`

In Terraform v1.12.0 and later, use an [`identity` block](https://developer.hashicorp.com/terraform/language/resources/identities) to import ApiHubInstance using identity values. For example:

```tf
import {
  identity = {
    location = "<-required value->"
    apiHubInstanceId = "<-optional value->"
    project = "<-optional value->"
  }
  to = google_apihub_api_hub_instance.default
}
```

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import ApiHubInstance using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/locations/{{location}}/apiHubInstances/{{api_hub_instance_id}}"
  to = google_apihub_api_hub_instance.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), ApiHubInstance can be imported using one of the formats above. For example:

```
$ terraform import google_apihub_api_hub_instance.default projects/{{project}}/locations/{{location}}/apiHubInstances/{{api_hub_instance_id}}
$ terraform import google_apihub_api_hub_instance.default {{project}}/{{location}}/{{api_hub_instance_id}}
$ terraform import google_apihub_api_hub_instance.default {{location}}/{{api_hub_instance_id}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
