---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This code is generated by Magic Modules using the following:
#
#     Configuration: https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/compute/RolloutPlan.yaml
#     Template:      https:#github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/terraform/resource.html.markdown.tmpl
#
#     DO NOT EDIT this file directly. Any changes made to this file will be
#     overwritten during the next generation cycle.
#
# ----------------------------------------------------------------------------
subcategory: "Compute Engine"
description: |-
  A RolloutPlan is the customer-defined strategy to divide a large-scale change
  into smaller increments, referred to as "waves".
---

# google_compute_rollout_plan

A RolloutPlan is the customer-defined strategy to divide a large-scale change
into smaller increments, referred to as "waves". Each wave targets a specific
portion of the overall affected area and defines criteria that must be met
before progressing to the subsequent wave.

~> **Warning:** This resource is in beta, and should be used with the terraform-provider-google-beta provider.
See [Provider Versions](../guides/provider_versions.html.markdown) for more details on beta resources.

To get more information about RolloutPlan, see:

* [API documentation](https://cloud.google.com/compute/docs/reference/rest/beta/rolloutPlans)

<div class = "oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md&cloudshell_working_dir=rollout_plan_basic&open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;">
  </a>
</div>
## Example Usage - Rollout Plan Basic


```hcl
resource "google_compute_rollout_plan" "default" {
  provider       = google-beta
  name           = "tf-test-rollout-plan-%{random_suffix}"
  description    = "A test rollout plan"
  location_scope = "ZONAL"

  waves {
    display_name = "wave-1"
    selectors {
      location_selector {
        included_locations = ["us-central1-a"]
      }
    }
    validation {
      type = "manual"
    }
  }
}
```

## Argument Reference

The following arguments are supported:


* `waves` -
  (Required)
  The waves included in this rollout plan.
  Structure is [documented below](#nested_waves).

* `name` -
  (Required)
  Name of the resource. Provided by the client when the resource is created.
  The name must be 1-63 characters long, and comply with RFC1035.


* `description` -
  (Optional)
  An optional description of this resource.

* `location_scope` -
  (Optional)
  The location scope of the rollout plan.
  Possible values are: `LOCATION_SCOPE_UNSPECIFIED`, `ZONAL`, `REGIONAL`.

* `project` - (Optional) The ID of the project in which the resource belongs.
    If it is not provided, the provider project is used.



<a name="nested_waves"></a>The `waves` block supports:

* `display_name` -
  (Optional)
  The display name of this wave of the rollout plan.

* `number` -
  (Output)
  The wave number.

* `selectors` -
  (Required)
  The selectors for this wave. There is a logical AND between each selector
  defined in a wave, so a resource must satisfy the criteria of *all* the
  specified selectors to be in scope for the wave.
  Structure is [documented below](#nested_waves_selectors).

* `validation` -
  (Required)
  The validation to be performed before progressing to the next wave.
  Structure is [documented below](#nested_waves_validation).

* `orchestration_options` -
  (Optional)
  Options to control the pace of orchestration of a wave.
  Structure is [documented below](#nested_waves_orchestration_options).


<a name="nested_waves_selectors"></a>The `selectors` block supports:

* `resource_hierarchy_selector` -
  (Optional)
  Roll out to resources by Cloud Resource Manager resource hierarchy nodes such as projects, folders, orgs.
  Structure is [documented below](#nested_waves_selectors_resource_hierarchy_selector).

* `location_selector` -
  (Optional)
  Roll out to resources by location.
  Structure is [documented below](#nested_waves_selectors_location_selector).


<a name="nested_waves_selectors_resource_hierarchy_selector"></a>The `resource_hierarchy_selector` block supports:

* `included_organizations` -
  (Optional)
  Format: "organizations/{organization_id}"

* `included_folders` -
  (Optional)
  Format: "folders/{folder_id}"

* `included_projects` -
  (Optional)
  Format: "projects/{project_id}"

<a name="nested_waves_selectors_location_selector"></a>The `location_selector` block supports:

* `included_locations` -
  (Optional)
  Example: "us-central1-a"

<a name="nested_waves_validation"></a>The `validation` block supports:

* `type` -
  (Required)
  The type of the validation. Possible values:
  "manual": The system waits for an end-user approval API before progressing to the next wave.
  "time": The system waits for a user specified duration before progressing to the next wave.

* `time_based_validation_metadata` -
  (Optional)
  Metadata required if type = "time".
  Structure is [documented below](#nested_waves_validation_time_based_validation_metadata).


<a name="nested_waves_validation_time_based_validation_metadata"></a>The `time_based_validation_metadata` block supports:

* `wait_duration` -
  (Optional)
  The duration that the system waits in between waves. This wait starts
  after all changes in the wave are rolled out.

<a name="nested_waves_orchestration_options"></a>The `orchestration_options` block supports:

* `max_concurrent_locations` -
  (Optional)
  Maximum number of locations to be orchestrated in parallel.

* `max_concurrent_resources_per_location` -
  (Optional)
  Maximum number of resources to be orchestrated per location in parallel.

* `delays` -
  (Optional)
  Delays, if any, to be added between batches of projects.
  Structure is [documented below](#nested_waves_orchestration_options_delays).


<a name="nested_waves_orchestration_options_delays"></a>The `delays` block supports:

* `duration` -
  (Optional)
  The duration of the delay, if any, to be added between batches of projects.

* `delimiter` -
  (Optional)
  Controls whether the delay should only be added between batches of projects corresponding to different locations, or also between batches of projects corresponding to the same location.
  Possible values are: `DELIMITER_UNSPECIFIED`, `DELIMITER_LOCATION`, `DELIMITER_BATCH`.

* `type` -
  (Optional)
  Controls whether the specified duration is to be added at the end of each batch, or if the total processing time for each batch will be padded if needed to meet the specified duration.
  Possible values are: `TYPE_UNSPECIFIED`, `TYPE_OFFSET`, `TYPE_MINIMUM`.

## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `projects/{{project}}/global/rolloutPlans/{{name}}`
* `self_link` - The URI of the created resource.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


RolloutPlan can be imported using any of these accepted formats:

* `projects/{{project}}/global/rolloutPlans/{{name}}`
* `{{project}}/{{name}}`
* `{{name}}`


In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import RolloutPlan using one of the formats above. For example:

```tf
import {
  id = "projects/{{project}}/global/rolloutPlans/{{name}}"
  to = google_compute_rollout_plan.default
}
```

When using the [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import), RolloutPlan can be imported using one of the formats above. For example:

```
$ terraform import google_compute_rollout_plan.default projects/{{project}}/global/rolloutPlans/{{name}}
$ terraform import google_compute_rollout_plan.default {{project}}/{{name}}
$ terraform import google_compute_rollout_plan.default {{name}}
```

## User Project Overrides

This resource supports [User Project Overrides](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override).
